# 运检调度计划

## 背景

某铁路公司有编排车组的运检计划的场景。运检计划通常以天为单位，每天铁路公司有若干交路任务需要保证被车组满足执行，铁路公司也同时自有若干车组用于执行交路任务。由于运行时的损耗，各车组均在持续运行一定周期/里程后需要进行定期检修，每日内各车组的使用计划，即用于执行交路或执行各类检修，被称为运检计划。

## 任务描述

该公司的检修项目分为Z检修和L检修。是否需要进行Z检修的依据包括Z剩余天数和Z剩余里程，L检修则包括L剩余里程。剩余天数和剩余里程均为距离修程标准的剩余量，一旦小于0则代表未在要求期内完成检修，业务上不允许这种情况。每进行一次特定检修后，该维修类型下的剩余天数和剩余里程会恢复至固定水平，其他类型的则不恢复。各车组随着每次交路任务的执行，其累计使用天数和公里数会增加，相应地导致每执行一项交路运输任务Z剩余里程和L剩余里程减去对应交路里程，Z剩余天数减1。

## 数据描述

### 车组里程信息

车组里程修时信息中包含每个车组的车组号、Z剩余天数、Z剩余里程和L剩余里程

|     | 车组号  | Z剩余天数 | Z剩余里程 | L剩余里程  |
| ---:|:---- | -----:| -----:| ------:|
| 0   | V001 | 53    | 53206 | 6706   |
| 1   | V002 | 46    | 46697 | 165230 |
| 2   | V003 | 48    | 48936 | 206634 |
| 3   | V004 | 39    | 39758 | 60868  |
| 4   | V005 | 22    | 22697 | 152713 |
| 5   | V006 | 4     | 4758  | 208095 |
| 6   | V007 | 34    | 34300 | 6800   |
| 7   | V008 | 65    | 65828 | 63200  |
| 8   | V009 | 25    | 25200 | 221218 |
| 9   | V010 | 18    | 18928 | 201827 |
| 10  | V011 | 57    | 57692 | 207706 |
| 11  | V012 | 13    | 14164 | 158309 |
| 12  | V013 | 17    | 17858 | 194148 |
| 13  | V014 | 4     | 7478  | 71805  |
| 14  | V015 | 51    | 52174 | 131899 |
| 15  | V016 | 67    | 66000 | 144276 |
| 16  | V017 | 38    | 39114 | 243086 |
| 17  | V018 | 10    | 11860 | 252860 |
| 18  | V019 | 51    | 51976 | 251976 |
| 19  | V020 | 37    | 38057 | 193714 |
| 20  | V021 | 41    | 42112 | 146482 |
| 21  | V022 | 19    | 19554 | 164307 |
| 22  | V023 | 64    | 64622 | 182980 |
| 23  | V024 | 13    | 13622 | 109887 |
| 24  | V025 | 20    | 20703 | 214619 |
| 25  | V026 | 43    | 44945 | 206888 |
| 26  | V027 | 55    | 55588 | 91374  |
| 27  | V028 | 18    | 18587 | 103039 |
| 28  | V029 | 22    | 22212 | 159402 |
| 29  | V030 | 5     | 7894  | 159225 |
| 30  | V031 | 67    | 68170 | 69472  |
| 31  | V032 | 61    | 62240 | 59781  |
| 32  | V033 | 26    | 26295 | 144603 |
| 33  | V034 | 36    | 36208 | 26358  |
| 34  | V035 | 36    | 35220 | 239892 |

### 待排交路

给出了交路编号、交路里程、需要连续运行的交路编号和每天是否需要车组执行运输任务，

* `1`表示需要，`0`表示不需要。
* 其中`R_ID`为连续交路的编号，`R_ID`相同的交路需要从上到下连续执行。例如，`r2`和`r3`均属于`R2`，则车组在某一天执行完`r2`，后一天必须执行`r3`，之后便可自由分配任务；
* `r14`、`r15`和`r16`分别属于`R7`、`R8`、`R9`，则没有连续运输要求

|     | 交路  | distance | R_ID | day1 | day2 | day3 | day4 | day5 | day6 | day7 | day8 |
| ---:| ---:| --------:| ----:| ----:| ----:| ----:| ----:| ----:| ----:| ----:| ----:|
| 0   | r1  | 220      | R1   | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 1   | r2  | 1697     | R2   | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 2   | r3  | 1697     | R2   | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 3   | r4  | 1758     | R3   | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 4   | r5  | 1758     | R3   | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 5   | r6  | 1692     | R3   | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 6   | r7  | 2164     | R4   | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 7   | r8  | 1858     | R5   | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 8   | r9  | 1828     | R5   | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 9   | r10 | 2174     | R5   | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 10  | r11 | 1694     | R6   | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 11  | r12 | 2170     | R6   | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 12  | r13 | 2240     | R6   | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 13  | r14 | 1300     | R7   | 1    | 1    | 1    | 0    | 0    | 0    | 0    | 1    |
| 14  | r15 | 1200     | R8   | 1    | 1    | 1    | 0    | 0    | 0    | 0    | 1    |
| 15  | r16 | 1206     | R9   | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 16  | r17 | 1936     | R10  | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 17  | r18 | 1928     | R10  | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 18  | r19 | 1678     | R11  | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 19  | r20 | 1976     | R11  | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 20  | r21 | 2057     | R11  | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 21  | r22 | 2112     | R13  | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 22  | r23 | 2114     | R13  | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 23  | r24 | 1554     | R13  | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 24  | r25 | 1622     | R14  | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 25  | r26 | 1622     | R14  | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 26  | r27 | 1703     | R15  | 1    | 0    | 1    | 0    | 0    | 0    | 0    | 1    |
| 27  | r28 | 1621     | R15  | 0    | 1    | 0    | 1    | 0    | 0    | 0    | 0    |
| 28  | r29 | 2860     | R16  | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 29  | r30 | 2945     | R16  | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 30  | r31 | 1588     | R17  | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 31  | r32 | 1587     | R17  | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 32  | r33 | 1212     | R18  | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 33  | r34 | 1295     | R18  | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 34  | r35 | 1208     | R18  | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |

### 班组检修能力

|     | maintlevel | day1 | day2 | day3 | day4 | day5 | day6 | day7 | day8 |
| ---:|:---------- | ----:| ----:| ----:| ----:| ----:| ----:| ----:| ----:|
| 0   | Z          | 2    | 0    | 0    | 2    | 2    | 2    | 2    | 0    |
| 1   | L          | 2    | 0    | 0    | 2    | 2    | 2    | 2    | 2    |

### 候选交路

|     | 0    | 1   | 2   | 3   | 4   | 5   | 6   | 7   | 8   |
| ---:|:---- |:--- |:--- |:--- |:--- |:--- |:--- |:--- |:--- |
| 0   | V001 | R12 | R9  | R7  | R6  | R5  | R8  | R10 | R11 |
| 1   | V002 | R4  | R1  | R3  | R5  | R2  |     |     |     |
| 2   | V003 | R12 | R9  | R7  | R13 | R5  | R8  | R10 | R11 |
| 3   | V004 | R4  | R1  | R6  | R3  | R5  | R2  |     |     |
| 4   | V005 | R4  | R1  | R3  | R5  | R2  |     |     |     |
| 5   | V006 | R4  | R1  | R6  | R3  | R5  | R2  |     |     |
| 6   | V007 | R4  | R7  | R6  | R9  | R5  | R8  | R10 |     |
| 7   | V008 | R4  | R6  | R7  | R3  | R5  | R8  | R2  |     |
| 8   | V009 | R9  | R7  | R6  | R5  | R8  | R10 | R11 |     |
| 9   | V010 | R12 | R9  | R7  | R13 | R5  | R8  | R10 | R11 |
| 10  | V011 | R4  | R1  | R6  | R3  | R5  | R2  |     |     |
| 11  | V012 | R4  | R1  | R6  | R7  | R3  | R5  | R2  |     |
| 12  | V013 | R4  | R6  | R7  | R3  | R5  | R8  | R2  |     |
| 13  | V014 | R12 | R9  | R13 | R5  | R8  | R10 | R14 | R11 |
| 14  | V015 | R4  | R6  | R7  | R3  | R5  | R8  | R2  |     |
| 15  | V016 | R17 | R1  | R18 | R6  | R9  | R7  | R5  | R8  |
| 16  | V017 | R12 | R16 | R13 | R5  | R15 | R10 | R14 | R11 |
| 17  | V018 | R17 | R16 | R18 | R13 | R5  | R15 | R14 |     |
| 18  | V019 | R12 | R9  | R13 | R5  | R8  | R10 | R14 | R11 |
| 19  | V020 | R12 | R9  | R13 | R5  | R8  | R10 | R14 | R11 |
| 20  | V021 | R12 | R16 | R13 | R5  | R15 | R10 | R14 | R11 |
| 21  | V022 | R12 | R16 | R13 | R5  | R15 | R10 | R14 | R11 |
| 22  | V023 | R12 | R17 | R16 | R13 | R5  | R15 | R14 | R11 |
| 23  | V024 | R12 | R17 | R16 | R13 | R5  | R15 | R14 | R11 |
| 24  | V025 | R12 | R17 | R16 | R18 | R13 | R5  | R15 | R14 |
| 25  | V026 | R17 | R16 | R18 | R13 | R5  | R15 | R14 |     |
| 26  | V027 | R17 | R16 | R18 | R5  | R15 | R14 |     |     |
| 27  | V028 | R17 | R16 | R18 | R5  | R15 | R14 |     |     |
| 28  | V029 | R17 | R16 | R18 | R5  | R15 |     |     |     |
| 29  | V030 | R4  | R7  | R6  | R9  | R3  | R5  | R8  |     |
| 30  | V031 | R4  | R7  | R6  | R9  | R3  | R5  | R8  |     |
| 31  | V032 | R4  | R7  | R6  | R9  | R3  | R5  | R8  |     |
| 32  | V033 | R17 | R16 | R18 | R5  | R15 |     |     |     |
| 33  | V034 | R17 | R16 | R18 | R5  | R15 |     |     |     |
| 34  | V035 | R4  | R1  | R3  | R5  | R2  |     |     |     |

### 车组修后恢复信息

|     | 检修类型 | 修后恢复公里数 | 修后恢复天数 |
| ---:|:---- | -------:| ------:|
| 0   | Z    | 66000   | 66     |
| 1   | L    | 250000  |        |

## 构建数学模型

构建运检计划编排数学模型，并满足以下约束

1. 每日各检修项目检修能力限制，安排检修计划不能突破检修能力
2. 运检计划不能有交路缺编，即没有车组执行
3. 每个车组只可执行候选交路中的对应交路
4. 每辆车的每种检修项目的剩余可用里程数和天数不能突破。
